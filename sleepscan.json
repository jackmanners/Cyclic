{"openapi":"3.1.0","info":{"title":"Wearables API","description":"API for wearable device data collection","version":"1.0.0"},"paths":{"/studies":{"get":{"tags":["Queries"],"summary":"Get Studies","description":"Get all studies","operationId":"get_studies_studies_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudiesListResponse"}}}}},"security":[{"APIKeyHeader":[]}]},"post":{"tags":["Mutations"],"summary":"Create Study","operationId":"create_study_studies_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateStudy"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/studies/{study_id}":{"get":{"tags":["Queries"],"summary":"Get Study By Id","description":"Get study by UUID (primary endpoint)","operationId":"get_study_by_id_studies__study_id__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"study_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Study Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/studies/by-code/{code}":{"get":{"tags":["Queries"],"summary":"Get Study By Code","description":"Get study by code (secondary endpoint)","operationId":"get_study_by_code_studies_by_code__code__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string","title":"Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/participants":{"get":{"tags":["Queries"],"summary":"Get Participants","description":"Get all participants","operationId":"get_participants_participants_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ParticipantsListResponse"}}}}},"security":[{"APIKeyHeader":[]}]},"post":{"tags":["Mutations"],"summary":"Create Participant","operationId":"create_participant_participants_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateParticipant"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/participants/{participant_id}":{"get":{"tags":["Queries"],"summary":"Get Participant By Id","description":"Get participant by UUID (primary endpoint)","operationId":"get_participant_by_id_participants__participant_id__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"participant_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Participant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ParticipantResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/participants/by-email/{email}":{"get":{"tags":["Queries"],"summary":"Get Participant By Email","description":"Get participant by email (secondary endpoint)","operationId":"get_participant_by_email_participants_by_email__email__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"email","in":"path","required":true,"schema":{"type":"string","format":"email","title":"Email"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ParticipantResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/devices":{"get":{"tags":["Queries"],"summary":"Get Devices","description":"Get all devices","operationId":"get_devices_devices_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DevicesListResponse"}}}}},"security":[{"APIKeyHeader":[]}]}},"/notifications":{"get":{"tags":["Queries"],"summary":"Get Notifications","operationId":"get_notifications_notifications_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationsListResponse"}}}}},"security":[{"APIKeyHeader":[]}]}},"/sleep/high-freq/by-email/{email}":{"get":{"tags":["Queries"],"summary":"Get Sleep High Freq By Email","description":"Get high frequency sleep data (HR, RR, snoring) for a participant","operationId":"get_sleep_high_freq_by_email_sleep_high_freq_by_email__email__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"email","in":"path","required":true,"schema":{"type":"string","format":"email","title":"Email"}},{"name":"datetime_until","in":"query","required":true,"schema":{"type":"string","format":"date-time","title":"Datetime Until"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sleep/summary/{participant_id}":{"get":{"tags":["Queries"],"summary":"Get Sleep Summary","description":"Get sleep summary data (time in bed, sleep time, duration) for a participant","operationId":"get_sleep_summary_sleep_summary__participant_id__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"participant_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Participant Id"}},{"name":"duration","in":"query","required":true,"schema":{"type":"integer","title":"Duration"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sleep/summary/by-email/{email}":{"get":{"tags":["Queries"],"summary":"Get Sleep Summary By Email","operationId":"get_sleep_summary_by_email_sleep_summary_by_email__email__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"email","in":"path","required":true,"schema":{"type":"string","format":"email","title":"Email"}},{"name":"duration","in":"query","required":true,"schema":{"type":"integer","title":"Duration"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/invite-user":{"post":{"tags":["Mutations"],"summary":"Invite User","operationId":"invite_user_invite_user_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteUser"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/delete-user":{"post":{"tags":["Mutations"],"summary":"Delete User","operationId":"delete_user_delete_user_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteUser"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/studies/update":{"post":{"tags":["Mutations"],"summary":"Update Study","description":"Update study (can update code and display_name)","operationId":"update_study_studies_update_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStudy"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/participants/delete":{"post":{"tags":["Mutations"],"summary":"Delete Participant","operationId":"delete_participant_participants_delete_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteParticipant"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/link-devices":{"post":{"tags":["Mutations"],"summary":"Link Devices","operationId":"link_devices_link_devices_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LinkDevices"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/backfill-sleep-coverage":{"post":{"tags":["Mutations"],"summary":"Backfill Sleep Coverage","description":"Backfill sleep summary coverage data for all participants","operationId":"backfill_sleep_coverage_backfill_sleep_coverage_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"APIKeyHeader":[]}]}}},"components":{"schemas":{"CreateParticipant":{"properties":{"requester_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Requester Id"},"email":{"type":"string","title":"Email"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"short_name":{"type":"string","title":"Short Name"},"study":{"$ref":"#/components/schemas/StudyReference"},"id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Id"}},"type":"object","required":["email","first_name","last_name","short_name","study"],"title":"CreateParticipant"},"CreateStudy":{"properties":{"requester_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Requester Id"},"code":{"type":"string","pattern":"^[a-z0-9-]{1,50}$","title":"Code"},"display_name":{"type":"string","title":"Display Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Id"}},"type":"object","required":["code","display_name"],"title":"CreateStudy"},"DeleteParticipant":{"properties":{"requester_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Requester Id"},"participant":{"$ref":"#/components/schemas/ParticipantReference"}},"type":"object","required":["participant"],"title":"DeleteParticipant"},"DeleteUser":{"properties":{"requester_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Requester Id"},"user":{"$ref":"#/components/schemas/UserReference"}},"type":"object","required":["user"],"title":"DeleteUser"},"DeviceResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"participant_id":{"type":"string","format":"uuid","title":"Participant Id"},"device_type":{"$ref":"#/components/schemas/DeviceType"},"mac_address":{"type":"string","title":"Mac Address"},"withings_device_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Withings Device Type"},"withings_device_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Withings Device Id"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model"},"model_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Model Id"},"serial_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Serial Number"},"battery":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Battery"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"modified_at":{"type":"string","format":"date-time","title":"Modified At"}},"type":"object","required":["id","participant_id","device_type","mac_address","withings_device_type","withings_device_id","model","model_id","serial_number","battery","timezone","created_at","modified_at"],"title":"DeviceResponse"},"DeviceType":{"type":"string","enum":["wsa","hub"],"title":"DeviceType"},"DevicesListResponse":{"properties":{"devices":{"items":{"$ref":"#/components/schemas/DeviceResponse"},"type":"array","title":"Devices"}},"type":"object","required":["devices"],"title":"DevicesListResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InviteUser":{"properties":{"requester_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Requester Id"},"user_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"User Id"},"email":{"type":"string","title":"Email"},"role":{"$ref":"#/components/schemas/UserRole"},"permissions_by_study":{"anyOf":[{"additionalProperties":{"items":{"$ref":"#/components/schemas/StudyPermission"},"type":"array"},"propertyNames":{"format":"uuid"},"type":"object"},{"type":"null"}],"title":"Permissions By Study"}},"type":"object","required":["email","role"],"title":"InviteUser"},"LinkDevices":{"properties":{"requester_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Requester Id"},"participant":{"$ref":"#/components/schemas/ParticipantReference"},"mac_address_wsa":{"type":"string","title":"Mac Address Wsa"},"mac_address_hub":{"type":"string","title":"Mac Address Hub"},"override_mac_address_wsa":{"type":"boolean","title":"Override Mac Address Wsa","default":false},"override_mac_address_hub":{"type":"boolean","title":"Override Mac Address Hub","default":false}},"type":"object","required":["participant","mac_address_wsa","mac_address_hub"],"title":"LinkDevices"},"NotificationResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"user_id":{"type":"integer","title":"User Id"},"appli":{"type":"integer","title":"Appli"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"modified_at":{"type":"string","format":"date-time","title":"Modified At"}},"type":"object","required":["id","user_id","appli","created_at","modified_at"],"title":"NotificationResponse"},"NotificationsListResponse":{"properties":{"notifications":{"items":{"$ref":"#/components/schemas/NotificationResponse"},"type":"array","title":"Notifications"}},"type":"object","required":["notifications"],"title":"NotificationsListResponse"},"ParticipantReference":{"properties":{"id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Id"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"}},"type":"object","title":"ParticipantReference","description":"Reference to a participant by either UUID or email. Exactly one field must be provided."},"ParticipantResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"withings_email":{"type":"string","title":"Withings Email"},"withings_user_id":{"type":"integer","title":"Withings User Id"},"study_id":{"type":"string","format":"uuid","title":"Study Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"modified_at":{"type":"string","format":"date-time","title":"Modified At"}},"type":"object","required":["id","withings_email","withings_user_id","study_id","created_at","modified_at"],"title":"ParticipantResponse"},"ParticipantsListResponse":{"properties":{"participants":{"items":{"$ref":"#/components/schemas/ParticipantResponse"},"type":"array","title":"Participants"}},"type":"object","required":["participants"],"title":"ParticipantsListResponse"},"StudiesListResponse":{"properties":{"studies":{"items":{"$ref":"#/components/schemas/StudyResponse"},"type":"array","title":"Studies"}},"type":"object","required":["studies"],"title":"StudiesListResponse"},"StudyPermission":{"type":"string","enum":["view_participants","edit_participants"],"title":"StudyPermission"},"StudyReference":{"properties":{"id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Id"},"code":{"anyOf":[{"type":"string","pattern":"^[a-z0-9-]{1,50}$"},{"type":"null"}],"title":"Code"}},"type":"object","title":"StudyReference","description":"Reference to a study by either UUID or code. Exactly one field must be provided."},"StudyResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"code":{"type":"string","title":"Code"},"display_name":{"type":"string","title":"Display Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"modified_at":{"type":"string","format":"date-time","title":"Modified At"}},"type":"object","required":["id","code","display_name","description","created_at","modified_at"],"title":"StudyResponse"},"UpdateStudy":{"properties":{"requester_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Requester Id"},"study":{"$ref":"#/components/schemas/StudyReference"},"code":{"anyOf":[{"type":"string","pattern":"^[a-z0-9-]{1,50}$"},{"type":"null"}],"title":"Code"},"display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Display Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","required":["study"],"title":"UpdateStudy"},"UserReference":{"properties":{"id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Id"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"}},"type":"object","title":"UserReference","description":"Reference to a user by either UUID or email. Exactly one field must be provided."},"UserRole":{"type":"string","enum":["admin","user"],"title":"UserRole"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"APIKeyHeader":{"type":"apiKey","in":"header","name":"X-API-Key"}}}}